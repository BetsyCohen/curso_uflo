<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.526">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Betsy Cohen">
<meta name="dcterms.date" content="2025-04-10">

<title>Curso análisis de datos 1. Sociología UFLO - Introducción a Tidyverse: union y pivoteo de tablas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://kit.fontawesome.com/78ddb093ea.js" crossorigin="anonymous"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Curso análisis de datos 1. Sociología UFLO
      </li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Curso análisis de datos 1. Sociología UFLO</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inicio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../index_materiales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Materiales</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../u2-intro-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 2 Introducción al análisis de datos con R y RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../u3-tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 3: ETL con tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../u4-graficos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 4: Comunicar: gráficos y diferentes salidas de reportes con Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../u5-comunidad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 5: Recursos y experiencias de la comunidad.</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../index_programa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programa y crono</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../programa_y_crono/programa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programa</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../programa_y_crono/cronograma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cronograma</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Licencia</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#clase-de-hoy-más-allá-de-los-verbos-básicos" id="toc-clase-de-hoy-más-allá-de-los-verbos-básicos" class="nav-link active" data-scroll-target="#clase-de-hoy-más-allá-de-los-verbos-básicos">Clase de Hoy: Más Allá de los Verbos Básicos 🚀</a></li>
  <li><a href="#que-las-tablas-sean-unidas-porque-esa-es-la-ley-primera" id="toc-que-las-tablas-sean-unidas-porque-esa-es-la-ley-primera" class="nav-link" data-scroll-target="#que-las-tablas-sean-unidas-porque-esa-es-la-ley-primera">Que las tablas sean unidas porque esa es la ley primera</a>
  <ul class="collapse">
  <li><a href="#qué-es-un-join" id="toc-qué-es-un-join" class="nav-link" data-scroll-target="#qué-es-un-join">Qué es un join()</a></li>
  <li><a href="#que-tipos-de-join-existen" id="toc-que-tipos-de-join-existen" class="nav-link" data-scroll-target="#que-tipos-de-join-existen">Que tipos de join() existen</a></li>
  <li><a href="#que-tipos-de-join-existen-1" id="toc-que-tipos-de-join-existen-1" class="nav-link" data-scroll-target="#que-tipos-de-join-existen-1">Que tipos de join() existen</a></li>
  <li><a href="#otros-tipos-de-join" id="toc-otros-tipos-de-join" class="nav-link" data-scroll-target="#otros-tipos-de-join">Otros tipos de join</a></li>
  <li><a href="#cómo-unimos-tablas-con-dplyr" id="toc-cómo-unimos-tablas-con-dplyr" class="nav-link" data-scroll-target="#cómo-unimos-tablas-con-dplyr">¿Cómo Unimos Tablas con dplyr? 🛠️</a></li>
  <li><a href="#ejemplo-de-left_join" id="toc-ejemplo-de-left_join" class="nav-link" data-scroll-target="#ejemplo-de-left_join">Ejemplo de left_join() ⬅️</a></li>
  <li><a href="#elegir-el-tipo-de-join-correcto" id="toc-elegir-el-tipo-de-join-correcto" class="nav-link" data-scroll-target="#elegir-el-tipo-de-join-correcto">Elegir el Tipo de Join Correcto 🧐</a></li>
  </ul></li>
  <li><a href="#yo-soy-al-derecho-dado-vuelta-estas-vos" id="toc-yo-soy-al-derecho-dado-vuelta-estas-vos" class="nav-link" data-scroll-target="#yo-soy-al-derecho-dado-vuelta-estas-vos">Yo soy al derecho dado vuelta estas vos</a>
  <ul class="collapse">
  <li><a href="#situaciones-que-requieren-cintura" id="toc-situaciones-que-requieren-cintura" class="nav-link" data-scroll-target="#situaciones-que-requieren-cintura">Situaciones que requieren cintura</a></li>
  <li><a href="#qué-es-un-pivoteo-y-en-qué-situaciones-lo-voy-a-necesitar" id="toc-qué-es-un-pivoteo-y-en-qué-situaciones-lo-voy-a-necesitar" class="nav-link" data-scroll-target="#qué-es-un-pivoteo-y-en-qué-situaciones-lo-voy-a-necesitar">Qué es un pivoteo y en qué situaciones lo voy a necesitar</a></li>
  <li><a href="#estirar-a-lo-largo-con-pivot_longer" id="toc-estirar-a-lo-largo-con-pivot_longer" class="nav-link" data-scroll-target="#estirar-a-lo-largo-con-pivot_longer">Estirar a lo largo con pivot_longer</a></li>
  <li><a href="#estirar-a-lo-largo-con-pivot_longer-1" id="toc-estirar-a-lo-largo-con-pivot_longer-1" class="nav-link" data-scroll-target="#estirar-a-lo-largo-con-pivot_longer-1">Estirar a lo largo con pivot_longer</a></li>
  <li><a href="#estirar-a-lo-largo-con-pivot_longer-2" id="toc-estirar-a-lo-largo-con-pivot_longer-2" class="nav-link" data-scroll-target="#estirar-a-lo-largo-con-pivot_longer-2">Estirar a lo largo con pivot_longer</a></li>
  <li><a href="#estirar-a-lo-ancho-con-pivot_wider" id="toc-estirar-a-lo-ancho-con-pivot_wider" class="nav-link" data-scroll-target="#estirar-a-lo-ancho-con-pivot_wider">Estirar a lo ancho con pivot_wider</a></li>
  </ul></li>
  <li><a href="#qué-aprendimos-hasta-acá" id="toc-qué-aprendimos-hasta-acá" class="nav-link" data-scroll-target="#qué-aprendimos-hasta-acá">¿Qué aprendimos hasta acá?</a></li>
  <li><a href="#ahora-a-practicar" id="toc-ahora-a-practicar" class="nav-link" data-scroll-target="#ahora-a-practicar">Ahora a practicar!</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="introduccion_tidyverse_union_pivoteo.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introducción a Tidyverse: union y pivoteo de tablas</h1>
<p class="subtitle lead">Análisis de Datos 1 - Unidad 3</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Betsy Cohen </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="clase-de-hoy-más-allá-de-los-verbos-básicos" class="level1">
<h1>Clase de Hoy: Más Allá de los Verbos Básicos 🚀</h1>
<p>En la clase anterior, nos familiarizamos con los verbos esenciales del <code>dplyr</code> y cómo combinarlos con pipes para transformar datos.</p>
<p>Ahora, vamos a expandir nuestro arsenal de herramientas del tidyverse explorando dos operaciones fundamentales:</p>
<ul>
<li><p>Unión de Tablas (Joins): Combinar datos de múltiples tablas relacionadas.</p></li>
<li><p>Pivoteo de Tablas (Pivoting): Reorganizar la estructura de las tablas para facilitar el análisis.</p></li>
</ul>
<p>Estas operaciones son clave para trabajar con conjuntos de datos complejos y cuando quieras darte cuenta van a ser parte de tu trabajo diario con datos.</p>
</section>
<section id="que-las-tablas-sean-unidas-porque-esa-es-la-ley-primera" class="level1">
<h1>Que las tablas sean unidas porque esa es la ley primera</h1>
<p>Conociendo la familia de funciones join()</p>
<section id="qué-es-un-join" class="level2">
<h2 class="anchored" data-anchor-id="qué-es-un-join">Qué es un join()</h2>
<p>En el análisis de datos, a menudo tenemos información distribuida en múltiples tablas relacionadas y necesitamos unirlas para combinar la información y poder analizarla en conjunto.</p>
<p>Ejemplo:</p>
<p><strong>Tabla 1:</strong> <code>encc_personas_region</code>: Información agregada por región</p>
<p><strong>Tabla 2:</strong> <code>tamanio_localidad_region</code>: Información sobre el tamaño de localidad por región</p>
<p>Queremos unir estas tablas para tener en una sola tabla información combinada por región.</p>
</section>
<section id="que-tipos-de-join-existen" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="que-tipos-de-join-existen">Que tipos de join() existen</h2>
<p><code>dplyr</code> nos ofrece una familia de funciones ***_join()** para realizar diferentes tipos de uniones de tablas, basadas en la lógica de las bases de datos relacionales. Los principales tipos son:</p>
<table class="table">
<colgroup>
<col style="width: 71%">
<col style="width: 28%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>left_join:</strong> Mantiene TODAS las filas de tabla_A (izquierda) y agrega las columnas correspondientes de tabla_B donde hay coincidencia en la columna_clave. Si no hay coincidencia, se completa con NA.</td>
<td><img src="images/left-join.gif" class="img-fluid quarto-figure quarto-figure-center" data-fig-align="bottom" width="200"></td>
</tr>
<tr class="even">
<td><strong>right_join:</strong> Similar a left_join, pero mantiene TODAS las filas de tabla_B (derecha) y agrega las columnas de tabla_A donde hay coincidencia.</td>
<td><img src="images/right-join.gif" class="img-fluid quarto-figure quarto-figure-center" data-fig-align="bottom" width="200"></td>
</tr>
</tbody>
</table>
</section>
<section id="que-tipos-de-join-existen-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="que-tipos-de-join-existen-1">Que tipos de join() existen</h2>
<p><code>dplyr</code> nos ofrece una familia de funciones ***_join()** para realizar diferentes tipos de uniones de tablas, basadas en la lógica de las bases de datos relacionales. Los principales tipos son:</p>
<table class="table">
<colgroup>
<col style="width: 76%">
<col style="width: 23%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>inner_join:</strong> Mantiene solo las filas que tienen coincidencia en la columna_clave en AMBAS tablas.Es la intersección de las tablas.</td>
<td><img src="images/inner-join.gif" class="img-fluid quarto-figure quarto-figure-bottom" width="200"></td>
</tr>
<tr class="even">
<td><strong>full_join:</strong> Unión COMPLETA (EXTERNA). Mantiene TODAS las filas de AMBAS tablas, combinando las filas donde hay coincidencia y rellenando con NA donde no la hay. Es la unión de las tablas.</td>
<td><img src="images/full-join.gif" class="img-fluid quarto-figure quarto-figure-bottom" width="200"></td>
</tr>
</tbody>
</table>
</section>
<section id="otros-tipos-de-join" class="level2">
<h2 class="anchored" data-anchor-id="otros-tipos-de-join">Otros tipos de join</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>semi_join</strong> Unión SEMI-IZQUIERDA. Mantiene solo las filas de tabla_A que tienen coincidencia en la columna_clave en tabla_B, pero NO agrega las columnas de tabla_B. Sirve para filtrar tabla_A basándose en la presencia de coincidencias en tabla_B.</p>
<p><strong>anti_join</strong> Unión ANTI-IZQUIERDA. Mantiene solo las filas de tabla_A que NO tienen coincidencia en la columna_clave en tabla_B. Sirve para filtrar tabla_A y quedarte solo con las filas sin coincidencias en tabla_B.</p>
</div>
</div>
</section>
<section id="cómo-unimos-tablas-con-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="cómo-unimos-tablas-con-dplyr">¿Cómo Unimos Tablas con dplyr? 🛠️</h2>
<p>Todas las funciones *_join() de dplyr comparten una sintaxis similar:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>nueva_tabla_unida <span class="ot">&lt;-</span> tabla_A <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tipo_de_join</span>(tabla_B, <span class="at">by =</span> <span class="st">"columna_clave"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p><code>tabla_A %\&gt;% tipo_de_join(tabla_B, ...)</code>: Siempre empezamos con la tabla “izquierda” <code>(tabla_A)</code> y la “pipeamos” a la función <code>tipo_de_join()</code>.</p></li>
<li><p><code>tabla_B</code>: Es la tabla “derecha” que queremos unir a <code>tabla_A</code>.</p></li>
<li><p><code>by = "columna_clave"</code>: CLAVE DE UNIÓN. Especificamos qué columna (o columnas) se utilizan para encontrar las coincidencias entre las filas de tabla_A y tabla_B. Las tablas se unirán basándose en los valores compartidos en esta columna. El nombre de la columna clave debe ser el mismo en ambas tablas, o podemos usar <code>by = c("columna_A" = "columna_B")</code> si tienen nombres diferentes.</p></li>
</ul>
</section>
<section id="ejemplo-de-left_join" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="ejemplo-de-left_join">Ejemplo de left_join() ⬅️</h2>
<p>Vamos a asumir que <code>encc_personas_region</code> es nuestra tabla “principal” (izquierda) y queremos agregarle información de <code>tamanio_localidad_region</code> (tabla derecha), manteniendo todas las regiones de <code>encc_personas_region</code>:</p>
<p>De nuevo partimos de:</p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(encc_personas_region,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">total_personas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: right;">388</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: right;">608</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: right;">431</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tamanio_localidad_region,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">Mas de 400mil</th>
<th style="text-align: right;">80mil a 400mil</th>
<th style="text-align: right;">Menos 80mil</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: right;">388</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: right;">382</td>
<td style="text-align: right;">206</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: right;">308</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">18</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tabla_left_join <span class="ot">&lt;-</span> encc_personas_region <span class="sc">%&gt;%</span> <span class="co"># tabla de la izquierda</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(tamanio_localidad_region, <span class="at">by =</span> <span class="st">"region"</span>) <span class="co"># unir tabla de la derecha usando como clave la variable "Region"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>tabla_left_join</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">total_personas</th>
<th style="text-align: right;">Mas de 400mil</th>
<th style="text-align: right;">80mil a 400mil</th>
<th style="text-align: right;">Menos 80mil</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: right;">388</td>
<td style="text-align: right;">388</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: right;">608</td>
<td style="text-align: right;">382</td>
<td style="text-align: right;">206</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: right;">431</td>
<td style="text-align: right;">308</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">GBA</td>
<td style="text-align: right;">620</td>
<td style="text-align: right;">614</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEA</td>
<td style="text-align: right;">448</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">354</td>
<td style="text-align: right;">94</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOA</td>
<td style="text-align: right;">446</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">177</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PATAGONIA</td>
<td style="text-align: right;">439</td>
<td style="text-align: right;">103</td>
<td style="text-align: right;">295</td>
<td style="text-align: right;">41</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="elegir-el-tipo-de-join-correcto" class="level2 incremental smaller">
<h2 class="incremental smaller anchored" data-anchor-id="elegir-el-tipo-de-join-correcto">Elegir el Tipo de Join Correcto 🧐</h2>
<p>La elección del tipo de join depende de lo que quieras lograr en tu análisis.</p>
<ul>
<li><p><code>inner_join():</code> Cuando necesitas datos completos y solo te interesan las filas que tienen información en ambas tablas. “Intersección”.</p></li>
<li><p><code>left_join():</code> Cuando quieres mantener todos los datos de tu tabla principal (izquierda) y agregar información complementaria de otra tabla (derecha), aunque falte información en la tabla derecha para algunas filas. “Prioriza la tabla izquierda”.</p></li>
<li><p><code>right_join():</code> Similar a left_join, pero priorizando la tabla derecha. Menos común en la práctica.</p></li>
<li><p><code>full_join():</code> Cuando quieres mantener todos los datos de ambas tablas, incluso si no hay coincidencias. “Unión completa”.</p></li>
<li><p><code>semi_join()</code> y <code>anti_join():</code> Para filtrar una tabla basándote en la existencia o no existencia de coincidencias en otra tabla. No agregan columnas, solo filtran filas.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip analógico
</div>
</div>
<div class="callout-body-container callout-body">
<p>A veces llegar a una tabla / resultados puede requerir de múltiples uniones y transformaciones en el medio. Dibujar en papel o una pizarra las tablas puede ser de gran ayuda en este proceso.</p>
</div>
</div>
</section>
</section>
<section id="yo-soy-al-derecho-dado-vuelta-estas-vos" class="level1">
<h1>Yo soy al derecho dado vuelta estas vos</h1>
<p>Las funciones <code>pivot_longer()</code> y <code>pivot_wider()</code></p>
<section id="situaciones-que-requieren-cintura" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="situaciones-que-requieren-cintura">Situaciones que requieren cintura</h2>
<p>Muchas veces nos va a pasar que vamos a tener una tabla en la cual las categorías que queremos mostrar (por ejemplo sexo, edad, provincia) se encuentran como nombres de columnas. Por ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>encc_personas_por_genero_region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">Mujer</th>
<th style="text-align: right;">Varón</th>
<th style="text-align: right;">No binario</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: right;">215</td>
<td style="text-align: right;">173</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: right;">368</td>
<td style="text-align: right;">240</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: right;">246</td>
<td style="text-align: right;">185</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">GBA</td>
<td style="text-align: right;">370</td>
<td style="text-align: right;">249</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEA</td>
<td style="text-align: right;">269</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOA</td>
<td style="text-align: right;">284</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PATAGONIA</td>
<td style="text-align: right;">253</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>La variable <code>sexo</code> no existe como tal sino que se encuentra <strong>repartida a lo ancho de la tabla como columnas</strong> y entonces si nos pasan una tabla como esta no podríamos aplicar operaciones como <code>filter()</code> y quedarnos sólo con las mujeres</p>
</section>
<section id="qué-es-un-pivoteo-y-en-qué-situaciones-lo-voy-a-necesitar" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="qué-es-un-pivoteo-y-en-qué-situaciones-lo-voy-a-necesitar">Qué es un pivoteo y en qué situaciones lo voy a necesitar</h2>
<p>El <strong>pivoteo de tablas</strong> es una operación para <strong>reorganizar la estructura de una tabla</strong>, cambiando la disposición de las filas y columnas. Es como “girar” o “rotar” la tabla para ver los datos desde otra perspectiva.</p>
<p>Dos operaciones clave de pivoteo en <code>tidyr</code>:</p>
<ul>
<li><p><strong><code>pivot_longer()</code></strong>: Convierte <strong>columnas “anchas” en filas “largas”</strong>. “Alarga” la tabla. Útil cuando las categorías están como nombres de columnas y queremos tenerlas en una columna <em>variable</em>.</p></li>
<li><p><strong><code>pivot_wider()</code></strong>: Convierte <strong>filas “largas” en columnas “anchas”</strong>. “Ensancha” la tabla. Operación inversa a <code>pivot_longer()</code>. Útil cuando las categorías están en una columna <em>variable</em> y queremos tenerlas como nombres de columnas.</p></li>
</ul>
</section>
<section id="estirar-a-lo-largo-con-pivot_longer" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="estirar-a-lo-largo-con-pivot_longer">Estirar a lo largo con pivot_longer</h2>
<p>Para convertir a sexo en columna vamos a usar una función muy útil llamada <code>pivot_longer</code>.</p>
<p>Partimos de la tabla resumen de personas por genero y región que tiene este aspecto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>encc_personas_por_genero_region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">Mujer</th>
<th style="text-align: right;">Varón</th>
<th style="text-align: right;">No binario</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: right;">215</td>
<td style="text-align: right;">173</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: right;">368</td>
<td style="text-align: right;">240</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: right;">246</td>
<td style="text-align: right;">185</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">GBA</td>
<td style="text-align: right;">370</td>
<td style="text-align: right;">249</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEA</td>
<td style="text-align: right;">269</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOA</td>
<td style="text-align: right;">284</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PATAGONIA</td>
<td style="text-align: right;">253</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Esta tabla esta buena para presentarla en un reporte al público pero no nos sirve si queremos “amasarla” al calor de la transformación de datos. Necesitamos estirar los datos de las columnas Mujer, Varon y No binario.</p>
</section>
<section id="estirar-a-lo-largo-con-pivot_longer-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="estirar-a-lo-largo-con-pivot_longer-1">Estirar a lo largo con pivot_longer</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>La función nos pide al menos <strong>dos argumentos</strong> para operar (además de la tabla en cuestión, obviamente)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>encc_personas_por_genero_region_alargada <span class="ot">&lt;-</span> encc_personas_por_genero_region <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. qué columnas pivotear</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"Mujer"</span>,<span class="st">"Varón"</span>,<span class="st">"No binario"</span>), </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. cómo se va a llamar la variable </span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"sexo"</span>, </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># (opcional) donde van a parar los valores alargados</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"personas"</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>De modo que</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(encc_personas_por_genero_region_alargada)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: left;">sexo</th>
<th style="text-align: right;">personas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">215</td>
</tr>
<tr class="even">
<td style="text-align: left;">CABA</td>
<td style="text-align: left;">Varón</td>
<td style="text-align: right;">173</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: left;">No binario</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">368</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: left;">Varón</td>
<td style="text-align: right;">240</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: left;">No binario</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="estirar-a-lo-largo-con-pivot_longer-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="estirar-a-lo-largo-con-pivot_longer-2">Estirar a lo largo con pivot_longer</h2>
<p>Y ahora ya podemos hacer operaciones con esta tabla como por ejemplo filtrar solo a las muejeres</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>encc_personas_por_genero_region_alargada <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sexo <span class="sc">==</span> <span class="st">"Mujer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: left;">sexo</th>
<th style="text-align: right;">personas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">215</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">368</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">246</td>
</tr>
<tr class="even">
<td style="text-align: left;">GBA</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">370</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEA</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">269</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOA</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PATAGONIA</td>
<td style="text-align: left;">Mujer</td>
<td style="text-align: right;">253</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="estirar-a-lo-ancho-con-pivot_wider" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="estirar-a-lo-ancho-con-pivot_wider">Estirar a lo ancho con pivot_wider</h2>
<p>Pivot wider es (como ya te estaras imaginando) la operación inversa. Los argumentos de esta función entonces van a ser</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>encc_personas_por_genero_region_alargada <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. Nombre de la variable que voy a estirar a lo ancho como columnas</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="st">"sexo"</span>, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. Qué variable contiene los valores que debo repartir en las columnas</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="st">"personas"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">Mujer</th>
<th style="text-align: right;">Varón</th>
<th style="text-align: right;">No binario</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CABA</td>
<td style="text-align: right;">215</td>
<td style="text-align: right;">173</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">CENTRO</td>
<td style="text-align: right;">368</td>
<td style="text-align: right;">240</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CUYO</td>
<td style="text-align: right;">246</td>
<td style="text-align: right;">185</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">GBA</td>
<td style="text-align: right;">370</td>
<td style="text-align: right;">249</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEA</td>
<td style="text-align: right;">269</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">NOA</td>
<td style="text-align: right;">284</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PATAGONIA</td>
<td style="text-align: right;">253</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si bien no es una regla, podríamos pensar que <code>pivot_longer()</code> va a transformar los datos de manera entendible para una máquina o para el trabajo con ellos como tablas de manera <em>tidy</em>, mientras que <code>pivot_wider()</code> siempre nos da un formato</p>
</div>
</div>
</section>
</section>
<section id="qué-aprendimos-hasta-acá" class="level1">
<h1>¿Qué aprendimos hasta acá?</h1>
<ul>
<li>Conocimos algunos de los beneficios de la comunidad de R</li>
<li>Nos zambullimos en R y recorrimos los básicos del IDE RStudio</li>
<li>Aprendimos convenciones y elementos básicos y a importar tablas para trabajar con ellas.</li>
<li>Hicimos nuestro primer viaje al <em>tidyverso</em> con los verbos centrales <code>dplyr()</code> y los conjugamos entre sí con <code>pipes</code></li>
<li>Unimos tablas y las hicimos girar sobre sí mismas para poder manipularlas.</li>
</ul>
</section>
<section id="ahora-a-practicar" class="level1">
<h1>Ahora a practicar!</h1>
<p>Ahora ya estamos podemos completar nuestro primer trabajo práctico integrador.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>