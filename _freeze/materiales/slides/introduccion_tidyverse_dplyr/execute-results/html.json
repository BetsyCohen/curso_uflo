{
  "hash": "66155230a33deb58d79d3c9d984e18d2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"IntroducciÃ³n al Tidyverse: El Universo de Herramientas para transformaciÃ³n de datos\"\nsubtitle: \"AnÃ¡lisis de Datos 1 - Unidad 3\"\nauthor: \"Betsy Cohen\"\nlogo: \"images/logo-uflo.png\"\ndate: \"10/04/2025\"\nformat:\n  revealjs:\n    width: 1600\n    height: 900\n    theme: slides.scss\n    highlight-style: a11y\n    transition: fade\n    slide-number: true\nexecute:\n  echo: true\ndf-print: kable\n---\n\n\n\n# El tidyverso: la frontera final\n\nEn la clase de hoy, nos sumergirnos en el universo de **`tidyverse`**, un conjunto de paquetes de R esencial para el anÃ¡lisis de datos. Cuando esta clase termine no solo vamos a poder importar datos de las distintas fuentes y hacer una exploraciÃ³n general, sino tambiÃ©n empezar a manipular y encadenar operaciones entre sÃ­.\n\n## Â¿QuÃ© es Tidyverse? ðŸ¤” {.smaller}\n\nEl `tidyverse` no es solo un paquete de R, Â¡es una **colecciÃ³n de paquetes** diseÃ±ados para trabajar juntos de forma armoniosa en el anÃ¡lisis de datos! Piensen en Ã©l como un **\"universo\" o \"ecosistema\" de herramientas**.\n\n**CaracterÃ­sticas Clave del Tidyverse:**\n\n-   **FilosofÃ­a \"Tidy Data\"**: OrganizaciÃ³n de datos de forma consistente y fÃ¡cil de usar (datos \"ordenados\").\n-   **Sintaxis Consistente y Verbosa**: Funciones con nombres claros (verbos) que hacen tareas especÃ­ficas. CÃ³digo fÃ¡cil de leer y entender.\n-   **DiseÃ±ado para el Flujo de Trabajo de Data Science**: Paquetes para cada etapa del anÃ¡lisis: importaciÃ³n, limpieza, transformaciÃ³n, visualizaciÃ³n, modelado, comunicaciÃ³n.\n-   **Ã‰nfasis en la Legibilidad y la Reproducibilidad**: CÃ³digo mÃ¡s fÃ¡cil de escribir, leer, mantener y compartir.\n-   **Comunidad Activa y DocumentaciÃ³n Exhaustiva**: Gran apoyo y recursos para aprender y resolver problemas.\n\n## Un flujo de trabajo ordenado o tidy tiene fases que iteran entre sÃ­ {.smaller}\n\n![](images/FlujoETL.png)\n\n## Tidyverse propone uno o varios paquetes que conservando una lÃ³gica similar responden a cada una de estas etapas {.smaller}\n\n![](images/FlujoETLTidyverse.png)\n\n## Paquetes principales de Tidyverse: Â¡Los 8 MagnÃ­ficos! âœ¨ {.smaller}\n\nAunque `tidyverse` incluye muchos paquetes, hay **8 paquetes \"centrales\"** que son los mÃ¡s esenciales y que se cargan automÃ¡ticamente al cargar `tidyverse` con `library(tidyverse)`:\n\n![](images/tidyverse_hex_core_packages.png){width=\"655\"}\n\n## Paquetes principales de Tidyverse: Â¡Los 8 MagnÃ­ficos! âœ¨ {.smaller}\n\n1.  **`ggplot2`**: Â¡Para visualizaciones de datos impresionantes y personalizables!\n2.  **`dplyr`**: Â¡Para manipulaciÃ³n y transformaciÃ³n de datos! (Verbos: `filter`, `select`, `mutate`, `arrange`, `summarize`, `group_by`)\n3.  **`tidyr`**: Â¡Para \"ordenar\" tus datos y organizarlos en formato \"tidy\"!\n4.  **`readr`**: Para importar datos de forma rÃ¡pida y eficiente (Funciones: `read_csv`, `read_tsv`, `read_delim`, etc. - **Alternativa a `read.csv` y funciones base de R** )\n5.  **`purrr`**: Â¡Para programaciÃ³n funcional y trabajar con listas de forma elegante!\n6.  **`tibble`**: Â¡Para crear data frames modernos y mejorados! (**Alternativa a los data frames base de R**, mÃ¡s \"amigables\" y consistentes)\n7.  **`stringr`**: Â¡Para manipulaciÃ³n de cadenas de texto (strings)!\n8.  **`forcats`**: Â¡Para trabajar con variables categÃ³ricas (factores)!\n\n**Â¡Y muchos mÃ¡s paquetes Ãºtiles en el \"universo\" Tidyverse!** (como `readxl`, `lubridate`, `httr`, `rvest`, etc.)\n\n## Instalando y Cargando el Tidyverse ðŸ“¦\n\n**Instalar Tidyverse (solo la primera vez):**\n\nPara instalar cualquier librerÃ­a siempre usamos la funciÃ³n `install.packages()` por lo que si aÃºn no lo hiciste deberas escribir:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"tidyverse\")\n```\n:::\n\n\n\nY cada vez que querramos usar el proyecto deberemos cargarlo *al inicio de cada sesiÃ³n de R:* escribiendo `library()` y el nombre de la librerÃ­a\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyverse' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggplot2' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tibble' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'purrr' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'dplyr' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'forcats' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'lubridate' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nâ”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€\nâœ” dplyr     1.1.4     âœ” readr     2.1.4\nâœ” forcats   1.0.0     âœ” stringr   1.5.0\nâœ” ggplot2   3.4.3     âœ” tibble    3.2.1\nâœ” lubridate 1.9.2     âœ” tidyr     1.3.0\nâœ” purrr     1.0.2     \nâ”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\nâœ– dplyr::filter() masks stats::filter()\nâœ– dplyr::lag()    masks stats::lag()\nâ„¹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n\nY asÃ­ cuando cargamos `tidyverse` , **se cargan automÃ¡ticamente los paquetes que este contiene**. Â¡Listos para usar!\n\n## Cargar los datos {.smaller}\n\nVamos a trabajar con la [serie histÃ³rica de Encuesta Nacional de Consumos Culturales](https://datos.cultura.gob.ar/dataset/encuesta-nacional-de-consumos-culturales) que representa las olas 2013,2017 y 2022 de este estudio.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# creamos el vector con la url\nencc_serie_hist_url <- \"https://datos.cultura.gob.ar/dataset/251c2ac2-e670-451c-9dbf-a4212af225b5/resource/d9570d16-f5d1-4d18-8145-3372eafb97af/download/encc-serie-historica.csv\"  \n\n# lo asignamos a un objeto tabla con la funciÃ³n read.csv\nencc_serie_hist <- read.csv(encc_serie_hist_url)\n\n# vemos los primeros 3 casos\nhead(encc_serie_hist,3)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| ID| EXPANSOR|NSE_3 | EDICION|GRUPOS_EDAD   | EDAD|NSE_SOCIOE |GENERO |REGION |PROVINCIA |TV1 |TV2 |TV3_1 |TV3_2 |TV3_3 |TV3_4 |TV3_5 |TV3_6 |TV5_1 |TV5_2 |TV5_3 |TV5_4 |TV6.1 |TV6.2 |TV8.1 |TV8.2 |TV8.3 | TV8.4| TV8.5|CINE1 |CINE2 |CINE3                        | CINE4| CINE5|NOTI1 |NOTI2 |NOTI3.1                     | NOTI5|NOTI8 | NOTI10|LIBRO1 |LIBRO2                |LIBRO3.1 |LIBRO3.2 |LIBRO4_1 |LIBRO4_2 |LIBRO4_3 |LIBRO4_4 | LIBRO5| LIBRO6| LIBRO9| LIBRO13|RADIO1 |RADIO2                         |RADIO3 |RADIO5_1 |RADIO5_2 |RADIO5_3 |RADIO5_4 |RADIO5_5 |MUSICA1 |MUSICA2 |MUSICA3                     |MUSICA7_1 |MUSICA7_2 |MUSICA7_3 |MUSICA7_4 |MUSICA7_5 |MUSICA7_6 |MUSICA7_7 |MUSICA7_8 |MUSICA7_9 |MUSICA9 |MUSICA10           |MUSICA11                       | MUSICA12| MUSICA13|MUSICA15 |VJ1 |VJ2 |VJ3_1 |VJ3_2 |VJ3_3 |VJ3_4 |VJ3_5 |VJ3_6 | VJ7|TEATRO1 |TEATRO3 | TEATRO4|PAT1 |PAT4 |PAT5_1 |PAT5_2 |PAT5_3 |PAT5_4 |PAT5_5 |PAT5_6 |PAT7.1              |PAT7.2              |PAT7.3 |PAT7.4              |PAT7.5 |PAT7.6              |PAT7.7             |PAT7.8              |PAT7.9              |PAT7.10 |PAT7.11             |PAT7.12             |PAT7.14             |PAT7.15             |PAT7.16             |PAT7.19             |INT1 |INT2 |INT3 |INT4 |INT5 |INT6_1 |INT6_2 |INT6_3 |INT6_4 |INT6_5 |INT6_6 |INT6_7 |INT7.1                      |INT7.2 |INT7.3 |INT7.4 |INT7.5 |INT7.6 | INT8| INT9| INT10|COMUN4 | SOC2|SOC13.1                 |SOC13.2               |\n|--:|--------:|:-----|-------:|:-------------|----:|:----------|:------|:------|:---------|:---|:---|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|-----:|-----:|:-----|:-----|:----------------------------|-----:|-----:|:-----|:-----|:---------------------------|-----:|:-----|------:|:------|:---------------------|:--------|:--------|:--------|:--------|:--------|:--------|------:|------:|------:|-------:|:------|:------------------------------|:------|:--------|:--------|:--------|:--------|:--------|:-------|:-------|:---------------------------|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:---------|:-------|:------------------|:------------------------------|--------:|--------:|:--------|:---|:---|:-----|:-----|:-----|:-----|:-----|:-----|---:|:-------|:-------|-------:|:----|:----|:------|:------|:------|:------|:------|:------|:-------------------|:-------------------|:------|:-------------------|:------|:-------------------|:------------------|:-------------------|:-------------------|:-------|:-------------------|:-------------------|:-------------------|:-------------------|:-------------------|:-------------------|:----|:----|:----|:----|:----|:------|:------|:------|:------|:------|:------|:------|:---------------------------|:------|:------|:------|:------|:------|----:|----:|-----:|:------|----:|:-----------------------|:---------------------|\n|  1|    10011|C2+C3 |    2013|13 A 17 ANIOS |   16|C3         |MUJER  |CENTRO |CORDOBA   |SI  |    |NO    |NO    |NO    |SI    |      |NO    |SI    |SI    |SI    |NO    |      |      |      |      |      |     4|    NA|SI    |      |TODOS O CASI TODAS LOS MESES |    NA|    NA|NO    |      |                            |    NA|SI    |     NA|NO     |LE ABURREN/ SE DUERME |         |         |         |         |         |         |     NA|     NA|      2|      10|SI     |                               |       |SI       |NO       |SI       |SI       |SI       |NO      |NS NC   |                            |          |          |NO        |NO        |NO        |          |          |NO        |NO        |SI      |                   |TODOS O CASI TODAS LAS SEMANAS |       NA|       NA|         |NO  |    |      |      |      |      |      |      |  NA|NO      |        |      NA|     |     |       |       |       |       |       |       |NUNCA               |NUNCA               |       |NUNCA               |       |HACE MAS DE UN ANIO |ENTRE 1 Y 12 MESES |NUNCA               |NUNCA               |NUNCA   |NUNCA               |NUNCA               |NUNCA               |NUNCA               |NUNCA               |NUNCA               |SI   |     |SI   |SI   |SI   |       |       |SI     |       |       |       |SI     |TODOS O CASI TODOS LOS DIAS |NUNCA  |NUNCA  |       |       |       |    2|    0|     2|       |    4|SECUNDARIOS INCOMPLETOS |SECUNDARIOS COMPLETOS |\n|  2|    12572|C2+C3 |    2013|50 A 64 ANIOS |   53|C3         |MUJER  |CENTRO |CORDOBA   |SI  |    |NO    |SI    |NO    |NO    |      |NO    |SI    |NO    |NO    |NO    |      |      |      |      |      |     1|    NA|NO    |NS NC |                             |    NA|    NA|SI    |      |ALGUNAS VECES AL MES        |    NA|SI    |     NA|NO     |MOTIVOS ECONOMICOS    |         |         |         |         |         |         |     NA|     NA|     NA|      NA|SI     |                               |       |SI       |NO       |NO       |NO       |NO       |SI      |        |ALGUNAS VECES A LA SEMANA   |NO        |NO        |NO        |NO        |NO        |          |SI        |NO        |NO        |NO      |MOTIVOS ECONOMICOS |                               |       NA|       NA|         |NO  |    |      |      |      |      |      |      |  NA|NO      |        |      NA|     |     |       |       |       |       |       |       |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |       |HACE MAS DE UN ANIO |       |HACE MAS DE UN ANIO |NUNCA              |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |NUNCA   |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |HACE MAS DE UN ANIO |NO   |     |NO   |     |NO   |       |       |       |       |       |       |       |                            |       |       |       |       |       |    0|    0|     0|       |    2|                        |SECUNDARIOS COMPLETOS |\n|  3|     9911|C2+C3 |    2013|30 A 49 ANIOS |   34|C3         |VARON  |CENTRO |CORDOBA   |SI  |    |NO    |SI    |NO    |NO    |      |NO    |SI    |NO    |NO    |NO    |      |      |      |      |      |     4|    NA|NO    |NS NC |                             |    NA|    NA|SI    |      |TODOS O CASI TODOS LOS DIAS |    NA|NO    |     NA|NO     |NS NC                 |         |         |         |         |         |         |     NA|     NA|     NA|      20|NO     |NO LE GUSTA/ INTERESA LA RADIO |       |         |NO       |         |         |         |SI      |        |TODOS O CASI TODOS LOS DIAS |SI        |SI        |NO        |NO        |NO        |          |NO        |NO        |NO        |SI      |                   |ALGUNAS VECES AL ANIO O MENOS  |       NA|       NA|         |NO  |    |      |      |      |      |      |      |  NA|NO      |        |      NA|     |     |       |       |       |       |       |       |ENTRE 1 Y 12 MESES  |HACE MAS DE UN ANIO |       |NUNCA               |       |HACE MAS DE UN ANIO |ENTRE 1 Y 12 MESES |ENTRE 1 Y 12 MESES  |ENTRE 1 Y 12 MESES  |NUNCA   |ENTRE 1 Y 12 MESES  |ENTRE 1 Y 12 MESES  |NUNCA               |NUNCA               |ENTRE 1 Y 12 MESES  |NUNCA               |SI   |     |SI   |SI   |SI   |       |       |       |       |       |       |SI     |NUNCA                       |NUNCA  |NUNCA  |       |       |       |    2|    0|     1|       |    5|TERCIARIOS INCOMPLETOS  |PRIMARIOS COMPLETOS   |\n\n</div>\n:::\n:::\n\n\n\n# dplyr: el \"domador\" de datos\n\nEl paquete dplyr es uno de los paquetes embebidos dentro del paquete tidyverse: un conjunto de paquetes destinados a la limpieza y manipulaciÃ³n de datos y que se convirtiÃ³ en un estÃ¡ndar en la prÃ¡ctica de la limpieza y manipulaciÃ³n de datos en R.\n\n![](https://asterhu.com/post/2023-05-11-coalesce-join-in-R/dplyr.png){fig-align=\"center\" width=\"241\"}\n\n## Verbos BÃ¡sicos del Tidyverse: Â¡Acciones con Datos! ðŸŽ¬\n\nDentro del `tidyverse`, especialmente en el paquete **`dplyr`** vamos a trabajar mucho con:\n\n-   **`select()`**: Selecciona las **columnas** que necesitas.\n-   **`filter()`**: Filas las **filas** u observaciones que cumplen con ciertas condiciones.\n-   **`mutate()`**: Crear nuevas columnas a partir de las existentes.\n-   **`group_by()`**: agrupar filas segÃºn los valores de una o mÃ¡s columnas.\n-   **`summarize()`**: Resume o hace un cÃ¡lculo para los datos que agrupamos.\n-   **`arrange()`**: Ordenar **filas** segÃºn los valores de una o mÃ¡s columnas.\n\n## Como por un tubo: Los Pipes `%>%`\n\nTodos estos verbos se van a ir encadenando por una especie de tubo o **pipes** que representamos con `%>%` (Ctrl+may+M)\n\n![](https://magrittr.tidyverse.org/logo.png){fig-align=\"center\" width=\"102\"}\n\n**Â¿QuÃ© hacen los pipes `%>%`?**\n\n-   **Conectan** operaciones en secuencia (de izquierda a derecha, de arriba a abajo).\n-   **Toman el resultado de la operaciÃ³n de la izquierda y lo \"envÃ­an\"** como *primer argumento* a la funciÃ³n de la derecha.\n-   Permiten escribir cÃ³digo de forma mÃ¡s lineal, clara y fÃ¡cil de leer, especialmente para secuencias largas de transformaciones de datos.\n-   Evitan crear variables intermedias innecesarias, haciendo el cÃ³digo mÃ¡s conciso y limpio.\n\n## Pipe es como decirle \"Y despuÃ©s\"\n\n![](https://www.rforecology.com/pipes_image0.png)\n\n## Puede ser que en alguna documentaciÃ³n o libro encuentres otro \"modelo\" de pipe {.smaller}\n\nEsto se debe a que una versiÃ³n de pipe es nativa y la otra no. Pero a los fines de lo que necesitas saber hasta ahora tienen la misma funciÃ³n.\n\n![](https://kpress.dev/blog/2022-06-19-replacing-the-magrittr-pipe-with-native-r-pipe/featured.png){fig-align=\"center\" width=\"185\"}\n\n## Arranquemos por llamar a tidyverse ðŸ“¢ {.smaller}\n\nLa primera vez que llamamos a tidyverse nos da un mensaje de advertencia, en donde nos pone al tanto de los paquetes que nos estÃ¡ trayendo y algunos conflictos entre funciones.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n::: callout-tip\n## El que avisa no traiciona\n\nTidyverse nos informa que pueden existir conflictos entre algunas de sus funciones. Esto se debe a que inicialmente su desarrollo se realizÃ³ de manera separada y por lo tanto las funciones tienen el mismo nombre. Para evitar problemas podes usar el nombre del paquete dos puntos y el nombre de la funciÃ³n.\n:::\n\n## 1. Seleccionando **columnas** con `select()` {.smaller}\n\nHasta ahora habÃ­amos visto que podÃ­amos llamar a una columna en particular con el signo \\$ o con \\[,columna_seleccionada\\]\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# traigo los primeros casos de la columna NSE_SOCIOE\nhead(encc_serie_hist$NSE_SOCIOE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"C3\"  \"C3\"  \"C3\"  \"D2E\" \"C3\"  \"C3\" \n```\n\n\n:::\n:::\n\n\n\nla funciÃ³n `select()` me permite hacer esto con muchas columnas. Veamos este ejemplo en el que charlamos usando verbos y el pipe (y despuÃ©s)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencc_serie_hist |> # toma la tabla encc_series_hist y despuÃ©s...\n  select(ID,EDICION,EDAD,GRUPOS_EDAD) |> # selecciona las columnas que te indico, y despuÃ©s\n  head() # selecciona los primeros 5 casos\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| ID| EDICION| EDAD|GRUPOS_EDAD    |\n|--:|-------:|----:|:--------------|\n|  1|    2013|   16|13 A 17 ANIOS  |\n|  2|    2013|   53|50 A 64 ANIOS  |\n|  3|    2013|   34|30 A 49 ANIOS  |\n|  4|    2013|   32|30 A 49 ANIOS  |\n|  5|    2013|   89|65 ANIOS Y MAS |\n|  6|    2013|   22|18 A 29 ANIOS  |\n\n</div>\n:::\n:::\n\n\n\n## 2. Filtrando **filas** con `filter()`\n\nCon filter vamos filtrar las observaciones que cumplan determiada condiciÃ³n.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencc_serie_hist |> # toma la tabla encc_series_hist y despuÃ©s...\n  select(ID,EDICION,EDAD,GRUPOS_EDAD) |> # selecciona las columnas que te indico, y despuÃ©s\n  filter(EDICION == 2022) |>  # traeme solamente los casos de la ediciÃ³n 2022 y despuÃ©s\n  tail() # # selecciona los Ãºltimos 5 casos\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|     |   ID| EDICION| EDAD|GRUPOS_EDAD    |\n|:----|----:|-------:|----:|:--------------|\n|3375 | 9749|    2022|   45|30 A 49 ANIOS  |\n|3376 | 9750|    2022|   24|18 A 29 ANIOS  |\n|3377 | 9751|    2022|   72|65 ANIOS Y MAS |\n|3378 | 9752|    2022|   42|30 A 49 ANIOS  |\n|3379 | 9753|    2022|   21|18 A 29 ANIOS  |\n|3380 | 9754|    2022|   24|18 A 29 ANIOS  |\n\n</div>\n:::\n:::\n\n\n\n## 3. Crear columnas nuevas con `mutate()`\n\nSupongamos que quisiera saber la edad de todos los entrevistados al dia de hoy\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencc_serie_hist |> # toma la tabla encc_series_hist y despuÃ©s...\n  select(ID,EDICION,EDAD,GRUPOS_EDAD) |> # selecciona las columnas que te indico, y despuÃ©s\n  filter(EDICION == 2022) |>  # traeme solamente los casos de la ediciÃ³n 2022 y despuÃ©s\n  mutate(edad_2025 = EDAD+3) |> # crea una nueva columna (edad_2025) que es igual a edad+3 y despuÃ©s\n  sample_n(size = 4) # crea una muestra de 4 casos \n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|   ID| EDICION| EDAD|GRUPOS_EDAD    | edad_2025|\n|----:|-------:|----:|:--------------|---------:|\n| 7215|    2022|   65|65 ANIOS Y MAS |        68|\n| 7629|    2022|   82|65 ANIOS Y MAS |        85|\n| 8364|    2022|   19|18 A 29 ANIOS  |        22|\n| 9287|    2022|   24|18 A 29 ANIOS  |        27|\n\n</div>\n:::\n:::\n\n\n\n## 4.`summarise()` y `group_by()`\n\nAl pricipio summarise y group_by pueden resultarnos un poco contra intutivos.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencc_serie_hist |> # toma la tabla encc_series_hist y despuÃ©s...\n  select(ID,EDICION,EDAD,GRUPOS_EDAD) |> # selecciona las columnas que te indico, y despuÃ©s\n  filter(EDICION == 2022) |>  # traeme solamente los casos de la ediciÃ³n 2022 y despuÃ©s\n  mutate(edad_2025 = EDAD+3) |> # crea una nueva columna (edad_2025) que es igual a edad+3 y despuÃ©s\n  group_by(GRUPOS_EDAD) |> #\n  summarise(edad_promedio = mean(EDAD),\n            edad_promedio_2025 = mean(edad_2025))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|GRUPOS_EDAD    | edad_promedio| edad_promedio_2025|\n|:--------------|-------------:|------------------:|\n|13 A 17 ANIOS  |      15.23645|           18.23645|\n|18 A 29 ANIOS  |      23.85043|           26.85043|\n|30 A 49 ANIOS  |      39.43268|           42.43268|\n|50 A 64 ANIOS  |      56.73661|           59.73661|\n|65 ANIOS Y MAS |      73.02322|           76.02322|\n\n</div>\n:::\n:::\n\n\n\n## Â¡Ya aprendimos a conjugar con `dplyr`! {.fit-text}\n\n# La yapa: `across()`: Aplicar Funciones a MÃºltiples Columnas\n\n**`across()`** es muy Ãºtil cuando trabajamos con transformaciones de tablas\n\n**`across()` permite aplicar la *misma funciÃ³n* (o funciones) a *mÃºltiples columnas* de forma concisa dentro de verbos como `mutate()` y `summarize()`**.\n\n## Sintaxis de `across()` {.smaller}\n\nSintaxis bÃ¡sica de across() dentro de mutate():\n\n``` r\ntabla_mutada <- tabla %>%\nmutate(\nacross(\n.cols = columnas_a_modificar,\n.fns = funcion_a_aplicar,\n# ... argumentos adicionales para la funciÃ³n ...\n.names = \"{.col}_{.fn}\" # (opcional) patrÃ³n para nombrar nuevas columnas\n)\n)\n```\n\n-   **`across()`**: FunciÃ³n para aplicar operaciones a mÃºltiples columnas.\n\n-   **`.cols = columnas_a_modificar`**: Especifica **quÃ© columnas quieres modificar** (o usar como input). Podes usar `c(\"columna1\", \"columna2\", \"columna3\")`, selectores de columnas (`starts_with(\"...\")`), `everything()`, `where(is.numeric)`, etc.\n\n-   **`.fns = funcion_a_aplicar`**: Especifica **quÃ© funciÃ³n (o lista de funciones)** quieres aplicar a las columnas seleccionadas en `.cols`. Puede ser una sola funciÃ³n (ej: `mean`) o una lista de funciones (ej: `list(mean = mean, median = median)`).\n\n-   **`.names = \"{.col}_{.fn}\"`**: (Opcional) Define un **patrÃ³n para nombrar las nuevas columnas** que se crean (si la funciÃ³n aplicada crea nuevas columnas, como `mutate()`). `{.col}` se reemplaza por el nombre de la columna original, y `{.fn}` por el nombre de la funciÃ³n (si usaste una lista de funciones nombradas).\n\n## Ejemplo de `across()` con `mutate()`\n\nSupongamos que queremos convertir a **minuscula** los valores de varias columnas de texto\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencc_serie_hist %>% \n  mutate(\n    across(\n      .cols = c(\"REGION\", \"PROVINCIA\", \"GENERO\"), # Columnas de texto a modificar\n      .fns = tolower,            # FunciÃ³n: convertir a minuscula (tolower)\n      .names = \"{.col}_MINUS\"    # Nombres de nuevas columnas: \"columna_MAYUS\"\n    )\n  ) %>% \n  select(REGION, REGION_MINUS, PROVINCIA, PROVINCIA_MINUS, GENERO, GENERO_MINUS)  %>%\n  head()\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|REGION |REGION_MINUS |PROVINCIA |PROVINCIA_MINUS |GENERO |GENERO_MINUS |\n|:------|:------------|:---------|:---------------|:------|:------------|\n|CENTRO |centro       |CORDOBA   |cordoba         |MUJER  |mujer        |\n|CENTRO |centro       |CORDOBA   |cordoba         |MUJER  |mujer        |\n|CENTRO |centro       |CORDOBA   |cordoba         |VARON  |varon        |\n|CENTRO |centro       |CORDOBA   |cordoba         |MUJER  |mujer        |\n|CENTRO |centro       |CORDOBA   |cordoba         |VARON  |varon        |\n|CENTRO |centro       |CORDOBA   |cordoba         |MUJER  |mujer        |\n\n</div>\n:::\n:::\n\n\n\n## `across()` es un ejemplo de la filosofÃ­a tidy\n\nNos evita la repeticiÃ³n de tareas y por ende nos ahorra un montÃ³n de tiempo y posibles errores.\n\n**`across()` es muy versÃ¡til y se puede usar con muchos verbos de `dplyr` y con diferentes tipos de funciones.** Â¡Simplifica mucho el cÃ³digo cuando necesitas aplicar la misma transformaciÃ³n a varias columnas!\n\n# Y ahora cÃ³mo seguimos?\n\nEn esta clase aprendimos a usar los verbos bÃ¡sicos del paquete `dplyr` junto con el conector de estos verbos el pipe **%\\>%**\n\nHacete un buen ðŸ§‰ que en la segunda parte de nuestra clase vamos a ver:\n\n-   CÃ³mo unir dos tablas de resumen entre sÃ­ (porque los datos no vienen siempre todos juntos, ni de una) -\n\n-   CÃ³mo \"dar vuelta\" una tabla. (Porque a veces la tortilla necesita vuelta y vuelta)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}