---
title: "IntroducciÃ³n al Tidyverse: El Universo de Herramientas para transformaciÃ³n de datos"
subtitle: "AnÃ¡lisis de Datos 1"
author: "Betsy Cohen"
logo: "images/logo-uflo.png"
date: "10/04/2025"
format:
  revealjs:
    width: 1600
    height: 900
    theme: slides.scss
    highlight-style: a11y
    transition: fade
    slide-number: true
execute:
  echo: true
df-print: kable
---


# El tidyverso: la frontera final

En la clase de hoy, nos sumergirnos en el universo de **`tidyverse`**, un conjunto de paquetes de R esencial para el anÃ¡lisis de datos. Cuando esta clase termine no solo vamos a poder importar datos de las distintas fuentes y hacer una exploraciÃ³n general, sino tambiÃ©n emepzar a manipular y encadenar operaciones entre sÃ­.



## Â¿QuÃ© es el Tidyverse? ğŸ¤”

El `tidyverse` no es solo un paquete de R, Â¡es una **colecciÃ³n de paquetes** diseÃ±ados para trabajar juntos de forma armoniosa en el anÃ¡lisis de datos!  Piensen en Ã©l como un **"universo" o "ecosistema" de herramientas**.


**CaracterÃ­sticas Clave del Tidyverse:**

-   **FilosofÃ­a "Tidy Data"**:  OrganizaciÃ³n de datos de forma consistente y fÃ¡cil de usar (datos "ordenados").
-   **Sintaxis Consistente y Verbosa**:  Funciones con nombres claros (verbos) que hacen tareas especÃ­ficas. CÃ³digo fÃ¡cil de leer y entender.
-   **DiseÃ±ado para el Flujo de Trabajo de Data Science**:  Paquetes para cada etapa del anÃ¡lisis: importaciÃ³n, limpieza, transformaciÃ³n, visualizaciÃ³n, modelado, comunicaciÃ³n.
-   **Ã‰nfasis en la Legibilidad y la Reproducibilidad**:  CÃ³digo mÃ¡s fÃ¡cil de escribir, leer, mantener y compartir.
-   **Comunidad Activa y DocumentaciÃ³n Exhaustiva**:  Gran apoyo y recursos para aprender y resolver problemas.

## Un flujo de trabajo ordenado o tidy tiene fases que iteran entre sÃ­ {.smaller}

![](images/FlujoETL.png)

## Tiudyverse propone uno o varios paquetes que conservando una lÃ³gica similar responden a cada una de estas etapas {.smaller}

![](images/FlujoETLTidyverse.png)

## Paquetes Core del Tidyverse: Â¡Los 8 MagnÃ­ficos! âœ¨

Aunque el `tidyverse` incluye muchos paquetes, hay **8 paquetes "centrales"** que son los mÃ¡s esenciales y que se cargan automÃ¡ticamente al cargar `tidyverse` con `library(tidyverse)`:

![](https://standard-deviator.com/workshop/cpa_2020_data_cleaning_tidyverse/slides/images/core_hex_stickers.png)

1.  **`ggplot2`**:  Â¡Para visualizaciones de datos impresionantes y personalizables! (GrÃ¡ficos)
2.  **`dplyr`**:  Â¡Para manipulaciÃ³n y transformaciÃ³n de datos! (Verbos: `filter`, `select`, `mutate`, `arrange`, `summarize`, `group_by`)
3.  **`tidyr`**:  Â¡Para "ordenar" tus datos y organizarlos en formato "tidy"! (Funciones para "tidy data": `pivot_longer`, `pivot_wider`, `separate`, `unite`)
4.  **`readr`**:  Â¡Para importar datos de forma rÃ¡pida y eficiente! (Funciones: `read_csv`, `read_tsv`, `read_delim`, etc. -  **Alternativa a `read.csv` y funciones base de R** )
5.  **`purrr`**:  Â¡Para programaciÃ³n funcional y trabajar con listas de forma elegante! (IteraciÃ³n y funciones para listas)
6.  **`tibble`**:  Â¡Para crear data frames modernos y mejorados! (**Alternativa a los data frames base de R**, mÃ¡s "amigables" y consistentes)
7.  **`stringr`**:  Â¡Para manipulaciÃ³n de cadenas de texto (strings)! (Funciones para trabajar con texto)
8.  **`forcats`**:  Â¡Para trabajar con variables categÃ³ricas (factores)! (Funciones para manipular factores)

**Â¡Y muchos mÃ¡s paquetes Ãºtiles en el "universo" Tidyverse!** (como `readxl`, `lubridate`, `httr`, `rvest`, etc.)

## Instalando y Cargando el Tidyverse ğŸ“¦

**Instalar el Tidyverse (solo la primera vez):**

```{r eval=FALSE}
install.packages("tidyverse")
```

Esto instalarÃ¡ el paquete **`tidyverse`**, que a su vez **instala automÃ¡ticamente los 8 paquetes core** (y algunos otros recomendados).

**Cargar el Tidyverse (al inicio de cada sesiÃ³n de R):**

```{r}
library(tidyverse)
```

Al cargar `tidyverse` con `library(tidyverse)`,  **se cargan automÃ¡ticamente los 8 paquetes core en tu sesiÃ³n de R**.  Â¡Listos para usar!

## Los Pipes `%>%`:  Â¡La TuberÃ­a MÃ¡gica! ğŸª„

Uno de los **elementos mÃ¡s distintivos y poderosos del `tidyverse`** son los **pipes** u "operador tuberÃ­a":  `%>%`

![]("https://magrittr.tidyverse.org/logo.png")

**Â¿QuÃ© hacen los pipes `%>%`?**

-   **Conectan operaciones en secuencia (de izquierda a derecha, de arriba a abajo).**
-   **Toman el resultado de la operaciÃ³n de la izquierda y lo "envÃ­an" como *primer argumento* a la funciÃ³n de la derecha.**
-   **Permiten escribir cÃ³digo de forma mÃ¡s lineal, clara y fÃ¡cil de leer**, especialmente para secuencias largas de transformaciones de datos.
-   **Evitan crear variables intermedias innecesarias**, haciendo el cÃ³digo mÃ¡s conciso y limpio.

## Pipe es como decirle "Y despuÃ©s"

![](https://www.rforecology.com/pipes_image0.png)
## Puede ser que en algunas bibliografÃ­as y documentaciones encuentres otro "modelo" de pipe

![](https://kpress.dev/blog/2022-06-19-replacing-the-magrittr-pipe-with-native-r-pipe/featured.png)


## Sintaxis BÃ¡sica del Pipe `%>%`

```{r}

```

**Ejemplo SIN Pipes (cÃ³digo anidado, difÃ­cil de leer):**

```r
# CÃ³digo SIN pipes (anidado y difÃ­cil de leer)
resultado_final <- funcion3(funcion2(funcion1(datos_iniciales), arg2_funcion2), arg3_funcion3)
```

**Ejemplo CON Pipes (cÃ³digo lineal y legible):**

```r
# CÃ³digo CON pipes (lineal y fÃ¡cil de leer)
resultado_final <- datos_iniciales %>%
  funcion1(argumentos_funcion1) %>%
  funcion2(argumentos_funcion2) %>%
  funcion3(argumentos_funcion3)
```

**Â¡Con pipes, lees el cÃ³digo como si fuera una receta o un flujo de pasos!  "Toma los `datos_iniciales`, *luego* aplica `funcion1`, *luego* aplica `funcion2`, *luego* aplica `funcion3`, y guarda el resultado en `resultado_final`."**

# Un Paquete para Cada Etapa del Flujo de Trabajo ğŸ› ï¸

El Tidyverse estÃ¡ diseÃ±ado para **cubrir de manera integral las diferentes etapas del flujo de trabajo de anÃ¡lisis de datos**:

[Image of a circular diagram representing the data analysis workflow stages, with Tidyverse packages associated with each stage: Import (readr, readxl), Tidy (tidyr), Transform (dplyr), Visualize (ggplot2), Model (modelr), Communicate (rmarkdown), and general packages (purrr, stringr, forcats, tibble)]

-   **ImportaciÃ³n de Datos**:  `readr`, `readxl` (y otros paquetes para diferentes formatos)
-   **"Tidy" de Datos (OrganizaciÃ³n)**:  `tidyr`
-   **TransformaciÃ³n de Datos**:  `dplyr`
-   **VisualizaciÃ³n de Datos**:  `ggplot2`
-   **Modelado de Datos**:  `modelr` (y otros paquetes de modelado tidy, como `broom`)
-   **ComunicaciÃ³n de Resultados**:  `rmarkdown` (y Quarto, construido sobre `rmarkdown`)

**Paquetes "Generales" que atraviesan todo el flujo:**

-   `purrr` (programaciÃ³n funcional)
-   `stringr` (texto)
-   `forcats` (factores)
-   `tibble` (data frames)

**Esta organizaciÃ³n por paquetes facilita:**

-   **Encontrar las herramientas adecuadas para cada tarea.**
-   **Aprender y dominar el flujo de trabajo de anÃ¡lisis de datos de forma progresiva.**
-   **Combinar herramientas de diferentes paquetes de forma consistente y eficiente** (Â¡gracias a los pipes!).

# Verbos BÃ¡sicos del Tidyverse:  Â¡Acciones con Datos! ğŸ¬

Dentro del `tidyverse`, especialmente en el paquete **`dplyr`** (para transformaciÃ³n de datos),  vamos a trabajar mucho con **"verbos"**.  Los verbos del tidyverse son **funciones que hacen acciones especÃ­ficas con nuestros data frames**.

**Los 5 Verbos Esenciales de `dplyr` (Â¡y algunos extras importantes!):**

[Image of a table or grid listing dplyr verbs with their descriptions and icons/visual representations: select (column selection icon), filter (funnel/filter icon), mutate (plus/add icon), arrange (sorting arrows icon), summarize (sigma/summation icon), group_by (grouping icon), and potentially others like rename, distinct, etc.]

1.  **`select()`**:  **SELECCIONAR** columnas.  Elige las columnas que quieres mantener, descarta las que no necesitas.  Â¡EnfÃ³cate en lo importante!
2.  **`filter()`**:  **FILTRAR** filas.  Elige las filas que cumplen con ciertas condiciones. Â¡Quedate solo con las observaciones que te interesan!
3.  **`mutate()`**:  **MUTAR** o crear nuevas columnas.  Calcula nuevas variables a partir de las existentes.  Â¡Enriquece tus datos!
4.  **`arrange()`**:  **ORDENAR** filas.  Reordena las filas segÃºn los valores de una o mÃ¡s columnas.  Â¡Pon orden en tus datos!
5.  **`summarize()` (o `summarise()`):**  **RESUMIR** datos.  Calcula estadÃ­sticos resumen (medias, medianas, conteos, etc.) para grupos de datos.  Â¡ObtÃ©n informaciÃ³n clave!
6.  **`group_by()`**:  **AGRUPAR** filas.  Divide tu data frame en grupos segÃºn los valores de una o mÃ¡s columnas.  Â¡Analiza por subgrupos!
7.  **`rename()`**:  **RENOMBRAR** columnas.  Cambia los nombres de las columnas para que sean mÃ¡s claros o consistentes.
8.  **`distinct()`**:  **VALORES ÃšNICOS**.  Filtra filas para mantener solo las filas distintas (Ãºnicas) basadas en una o mÃ¡s columnas.

**Â¡Estos verbos son como los "ladrillos" fundamentales para construir transformaciones de datos complejas en el tidyverse!  Los usaremos muchÃ­simo.**

---

# PrÃ³ximos Pasos:  Â¡Manos a la Obra con el Tidyverse! ğŸ’ª

En la prÃ³xima clase (Â¡la siguiente a esta!), vamos a **empezar a usar estos verbos del `tidyverse` en la prÃ¡ctica** con nuestros datos de encuestas ATTTA (o cualquier otro dataset que elijamos).

Vamos a aprender a:

-   **Seleccionar columnas** con `select()`.
-   **Filtrar filas** con `filter()`.
-   **Crear nuevas variables** con `mutate()`.
-   Â¡Y combinar estos verbos con los **pipes `%>%`** para crear flujos de trabajo de anÃ¡lisis de datos limpios y eficientes!

Â¡PrepÃ¡rense para **transformar sus datos con el poder del `tidyverse`**!
